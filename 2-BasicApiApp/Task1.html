<!DOCTYPE html>

<html lang="en" class=" is-copy-enabled is-u2f-enabled"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    

    <link crossorigin="anonymous" href="./css/1.css" integrity="sha256-MeNpzNKyOh7M3oPwPvNur/8fe5Al9gQsysM6eRV1PeI=" media="all" rel="stylesheet">
    <link crossorigin="anonymous" href="./css/2.css" integrity="sha256-Qs7rZXUl2oZfgtH3qETzuKtVxDXwVMxiuSkRvumyXpA=" media="all" rel="stylesheet">
    
    
    <link crossorigin="anonymous" href="./css/3.css" integrity="sha256-SKJvLEs/Mt2WVnI/X91VjUL2vMXRO6CkWuAl6ryc2LM=" media="all" rel="stylesheet">
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=device-width">
    
    <title>Step 2: Set up an API</title>
    <link rel="search" type="application/opensearchdescription+xml" href="https://github.com/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" href="https://github.com/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://github.com/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://github.com/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://github.com/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://github.com/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://github.com/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://github.com/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://github.com/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://github.com/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://github.com/apple-touch-icon-180x180.png">
    
    <link rel="assets" href="https://assets-cdn.github.com/">
   

      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

  

  <body class="logged-out  env-production windows vis-public">
    
    
    <div role="main">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode">
    <div id="js-repo-pjax-container" data-pjax-container=""><div class="container new-discussion-timeline experiment-repo-nav">
  <div class="repository-content">

  <div id="readme" class="readme boxed-group clearfix announce instapaper_body md">
    

      <article class="markdown-body entry-content" itemprop="text"><h2><a id="user-content-step-1-set-up-an-api" class="anchor" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Set up an API</h2>

<p>Set up a basic endpoint with the Web API</p>

<h2><a id="user-content-objectives" class="anchor" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Objectives</h2>

<ul>
<li>Set the Web API's dependencies and add it into the app via MVC (since it's in the same package)</li>
<li>Set up a basic endpoint</li>
</ul>

<h2><a id="user-content-lets-get-started" class="anchor" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Let's get started</h2>

<ol>
<li><p>Set up MVC! The Web API has been merged into MVC, so it's all one package. Start by adding this dependency for MVC to project.json. You will have to use your IDE to add using statements in the files referenced,</p>

<pre><code>"Microsoft.AspNetCore.Mvc": "1.1.0"
</code></pre></li>
<li><p>Add this namespace to the Startup class:</p>
<pre><code>using Microsoft.Extensions.DependencyInjection;
</code></pre>
<li><p>Add this method to the Startup class:</p>
using Microsoft.Extensions.DependencyInjection;
<pre><code>// This method gets called by the runtime. Use this method to add services to the container.

public void ConfigureServices(IServiceCollection services)
{
    services.AddMvcCore();
}
</code></pre></li>
<li><p>Replace the content of the Configure method on Startup class with the following line:</p>

<pre><code>app.UseMvc();
</code></pre></li>
<li><p>Create a Controllers folder in the root, and add a controller to it called <code>ArticlesController</code> to serve the API requests. Add the following to it:</p>

<pre><code>using Microsoft.AspNetCore.Mvc;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication.Controllers
{
    [Route("/api/[controller]")]
    public class ArticlesController : Controller
    {
        [HttpGet]
        public string Get() =&gt; "Hello, from the controller!";
    }
}
</code></pre></li>
<li><p>Run the app and you should be able to hit localhost:9182/api/articles.</p></li>
</ol>

<h2><a id="user-content-returning-json-from-the-api" class="anchor" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Returning JSON from the API</h2>

<ol>
<li><p>Create a folder called <code>Entities</code> and these classes:</p>

<ol>
<li><p>Add an entity base interface called <code>IEntityBase</code>:</p>

<pre><code>namespace ConsoleApplication.Entities
{
    public interface IEntityBase
    {
        int Id { get; set; }
    }
}
</code></pre></li>
<li><p>Then create a class called <code>Article</code>:</p>
<pre><code>namespace ConsoleApplication.Entities
{
    public class Article : IEntityBase
    {
        public int Id { get; set; }
	public string Title { get; set; }
    }
}
</code></pre></li>

<li><p>Add the <code>Microsoft.AspNetCore.Mvc.Formatters.Json</code> to <code>project.json</code>,</p>

<pre><code>"Microsoft.AspNetCore.Mvc.Formatters.Json": "1.1.0"</code></pre></li>
<li><p>Configure MVC to use the JSON formatter by changing the <code>ConfigureServices</code> in <code>Startup.cs</code> to use the following,</p>

<div class="highlight highlight-source-cs"><pre>public void ConfigureServices(IServiceCollection services)
{
    services.AddMvcCore().AddJsonFormatters();
}</pre></div></li>
	 
<li><p>Add this namespace to the <code>ArticlesController</code>:</p>
<pre><code>namespace ConsoleApplication.Entities</code></pre></li>

<li><p>Add a static list of projects to the <code>ArticlesController</code>:</p>

<pre><code>  public class ArticlesController : Controller
  {
      private static List&lt;Article&gt; _Articles = new List&lt;Article&gt;(new[] {
          new Article() { Id = 1, Title = "Intro to ASP.NET Core" },
          new Article() { Id = 2, Title = "Docker Fundamentals" },
          new Article() { Id = 3, Title = "Deploying to Azure with Docker" },
      });
      ...
  }

</code></pre></li>
<li><p>Change the <code>Get</code> method in <code>ArticlesController</code> to return <code>Article</code> and return the article with the id passed in.</p>

<pre><code>  [HttpGet("{id:int}")]
  public Article Get(int id)
  {
      return _Articles.Single(a =&gt; a.Id == id);
  }
</code></pre></li>
<li><p>Run the application and navigate to <code>/api/articles/1</code>. You should see a JSON payload of that article.</p></li>
</ol></li>
</ol>
</article>
  </div>


  </div>
  
</div></div>
  </div>

    </div>

        



    

    


      
      
      
      
      
      
      
    
    

  


</body></html>